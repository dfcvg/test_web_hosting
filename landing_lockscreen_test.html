<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—°ê²° ì¤‘</title>
    <style>
        body { font-family: sans-serif; margin: 0; background: #f0f2f5; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
        .msg-box { text-align: center; padding: 20px; }
        /* í„°ì¹˜ë¥¼ ìœ ë„í•˜ëŠ” ë°˜íˆ¬ëª… ì˜¤ë²„ë ˆì´ */
        #touch-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5); color: white;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            z-index: 1000; cursor: pointer;
        }
        .touch-icon { font-size: 50px; margin-bottom: 10px; animation: bounce 1s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    </style>
</head>
<body>

    <div class="msg-box">
        <h2>ì•±ìœ¼ë¡œ ì´ë™ ì¤‘ì…ë‹ˆë‹¤</h2>
        <p>ì ê¸ˆì„ í•´ì œí•˜ì…¨ë‚˜ìš”?</p>
    </div>

    <div id="touch-layer">
        <div class="touch-icon">ğŸ‘†</div>
        <div style="font-size: 18px; font-weight: bold;">í™”ë©´ì„ í„°ì¹˜í•´ì£¼ì„¸ìš”</div>
        <p style="font-size: 14px; opacity: 0.8;">í„°ì¹˜í•˜ì‹œë©´ ì•±ìœ¼ë¡œ ì—°ê²°ì´ ì™„ë£Œë©ë‹ˆë‹¤.</p>
    </div>

    <script>
        // 1. URLì—ì„œ target ê°€ì ¸ì˜¤ê¸°
        const params = new URLSearchParams(window.location.search);
        let target = params.get('target');
        if (target) target = decodeURIComponent(target);

        const touchLayer = document.getElementById('touch-layer');

        // 2. ì•± ì‹¤í–‰ í•¨ìˆ˜ (ê·¸ëƒ¥ href ì‚¬ìš©)
        function openApp() {
            if (!target) return;
            window.location.href = target;
            
            // ì´ë™ ì‹œë„ í›„ ë ˆì´ì–´ ë‹«ê¸°
            setTimeout(() => { touchLayer.style.display = 'none'; }, 1000);
        }

        // 3. íŒ¨í„´ í•´ì œ(ë³µê·€) ê°ì§€
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'visible') {
                // íŒ¨í„´ì„ í’€ê³  ëŒì•„ì˜¨ ì‹œì : í„°ì¹˜ ë ˆì´ì–´ë¥¼ ë„ì›€
                touchLayer.style.display = 'flex';
            }
        });

        // 4. ë ˆì´ì–´ í´ë¦­ ì‹œ ì‹¤ì œ ì•± í˜¸ì¶œ (User Gesture í™•ë³´)
        touchLayer.onclick = () => {
            openApp();
        };

        // 5. ì´ˆê¸° ì§„ì… ì‹œ (ì ê¸ˆ ì•ˆëœ ìƒíƒœë¼ë©´) ì¦‰ì‹œ ì‹œë„
        window.onload = () => {
            if (document.visibilityState === 'visible' && target) {
                window.location.href = target;
            }
        };
    </script>
</body>
</html>
